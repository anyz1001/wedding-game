<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"/></script>
        <script type="text/javascript">
            function oddsChange(){
                var bets = new Array(5);
                var total = 0;
                $('li input').each(function(index){
                    bets[index] = $.isNumeric($(this).val()) ? $(this).val() : 0;
                    total += $.isNumeric($(this).val()) ? parseInt($(this).val()) : 0;
                });
                $('li .odds').each(function(index){
                    if(bets[index] == 0 || (bets[index] / total) < 0.3)
                    {
                        $(this).html("2");
                    }
                    else if((bets[index] / total) >= 0.3 && (bets[index] / total) < 0.5)
                    {
                        $(this).html("1.6");
                    }
                    else
                    {
                        $(this).html("1.2");
                    }
                });                    
            }
            function calculate()
            {
                oddsChange();
                var bets = new Array(5);
                var odds = new Array(5);
                var total = 0;
                var winner = 0;
                $('li input').each(function(index){
                    bets[index] = $.isNumeric($(this).val()) ? $(this).val() : 0;
                    total += $.isNumeric($(this).val()) ? parseInt($(this).val()) : 0;
                });
                $('li .odds').each(function(index){
                    odds[index] = parseInt($(this).html());
                }); 
                winner = parseInt($('#winner').val());
                wintotal = bets[winner] * (odds[winner] + 1);
                var html = $('.w3-overlay .w3-panel').html();
                html += "<p>獲勝隊伍: " + $('li .w3-large').html() + "</p>";
                html += "<p>每注獲得: " + (bets[winner] * (odds[winner] + 1)) / (bets[winner] / 100)  +"</p>";
                html += "<p>隊伍獎金: " + (total - wintotal)  +"</p>";
                $('.w3-overlay .w3-panel').html(html);
                $('.w3-overlay').show();
            }
        </script>
    </head>
    <body>
            <ul class="w3-ul w3-card-5">
                <li class="w3-padding-16">
                    <span class="w3-white w3-right" style="width:40%">
                        下注:<input class="w3-input" type="text" onchange="oddsChange();">
                    </span>
                    <img src="image/1.jpg" class="w3-left w3-circle w3-margin-right" style="width:50px">
                    <span class="w3-large">隊伍A</span><br>
                    <span>賠率: 1賠<span class="odds">2</span></span>
                </li>
                <li class="w3-padding-16">
                    <span class="w3-white w3-right" style="width:40%">
                        下注:<input class="w3-input" type="text" onchange="oddsChange();">
                    </span>
                    <img src="image/2.jpg" class="w3-left w3-circle w3-margin-right" style="width:50px">
                    <span class="w3-large">隊伍B</span><br>
                    <span>賠率: 1賠<span class="odds">2</span></span>
                </li>  
                <li class="w3-padding-16">
                    <span class="w3-white w3-right" style="width:40%">
                        下注:<input class="w3-input" type="text" onchange="oddsChange();">
                    </span>
                    <img src="image/3.jpg" class="w3-left w3-circle w3-margin-right" style="width:50px">
                    <span class="w3-large">隊伍C</span><br>
                    <span>賠率: 1賠<span class="odds">2</span></span>
                </li> 
                <li class="w3-padding-16">
                    <span class="w3-white w3-right" style="width:40%">
                        下注:<input class="w3-input" type="text" onchange="oddsChange();">
                    </span>
                    <img src="image/4.jpg" class="w3-left w3-circle w3-margin-right" style="width:50px">
                    <span class="w3-large">隊伍D</span><br>
                    <span>賠率: 1賠<span class="odds">2</span></span>
                </li> 
                <li class="w3-padding-16">
                    <span class="w3-white w3-right" style="width:40%">
                        下注:<input class="w3-input" type="text" onchange="oddsChange();">
                    </span>
                    <img src="image/5.jpg" class="w3-left w3-circle w3-margin-right" style="width:50px">
                    <span class="w3-large">隊伍E</span><br>
                    <span>賠率: 1賠<span class="odds">2</span></span>
                </li> 
            </ul>
            <div class="w3-section">
                <div class="w3-panel w3-red w3-display-container">
                    <p style="float:left;">獲勝隊伍:</p>
                    <select class="w3-select" name="option" id="winner" style="float:right;width:50%;margin-top:8px">
                        <option value="0">隊伍A</option>
                        <option value="1">隊伍B</option>
                        <option value="2">隊伍C</option>
                        <option value="3">隊伍D</option>
                        <option value="4">隊伍E</option>
                    </select>
                </div>
                <button class="w3-button w3-block w3-teal" onclick="calculate();">計算</button>
            </div>
            <div class="w3-overlay">
                <div class="w3-panel w3-blue w3-round-xlarge w3-display-middle" style="width:80%">
                    <i class="fa fa-close w3-xlarge" style="float:right;margin-top:10px;" onclick="$('.w3-overlay').hide();"></i>
                </div>
            </div>
    </body>
</html>