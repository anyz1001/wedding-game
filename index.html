<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"/></script>
        <script type="text/javascript">
            function oddsChange(){
                var bets = new Array(5);
                var total = 0;
                $('li input').each(function(index){
                    bets[index] = $.isNumeric($(this).val()) ? $(this).val() : 0;
                    total += $.isNumeric($(this).val()) ? parseInt($(this).val()) : 0;
                });
                $('li .odds').each(function(index){
                    if(bets[index] == 0 || (bets[index] / total) < 0.4)
                    {
                        $(this).html("2");
                    }
                    else
                    {
                        $(this).html("1.5");
                    }
                });                    
            }
            function calculate()
            {
                oddsChange();
                var bets = new Array(5);
                var odds = new Array(5);
                var total = 0;
                var winner = 0;
                var wintotal = 0;
                var mosttotal = 0;
                $('li input').each(function(index){
                    bets[index] = $.isNumeric($(this).val()) ? $(this).val() : 0;
                    total += $.isNumeric($(this).val()) ? parseInt($(this).val()) : 0;
                });
                $('li .odds').each(function(index){
                    odds[index] = parseFloat($(this).html());
                }); 
                var html = "<i class=\"fa fa-close w3-xlarge\" style=\"float:right;margin-top:10px;\" onclick=\"$('.w3-overlay').hide();\"></i>";
                for (i = 0; i < 5; i++) { 
                    wintotal = parseInt(bets[i] * (odds[i]));
                    if(wintotal > mosttotal)
                    {
                        mosttotal = wintotal;
                        winner = i;
                    }
                }
                $('li .w3-large').each(function(index){
                    wintotal = parseInt(bets[index] * (odds[index]));
                    if(wintotal > mosttotal)
                    {
                        mosttotal = wintotal;
                        winner = index;
                    }
                    html += "<div class=\"w3-section\"><p>獲勝隊伍: " + $(this).html() + "</p>";
                    html += "<p>每注獲得: " + wintotal / (bets[index] / 100)  +" | 剩餘獎金: " + (total - wintotal)  +"</p></div>";
                });
                $('.w3-overlay .w3-panel').html(html);
                $('.w3-overlay .w3-section').eq(winner).addClass("w3-red");
                $('.w3-overlay').show();
            }
        </script>
    </head>
    <body>
            <ul class="w3-ul w3-card-5">
                <li class="w3-padding-16">
                    <span class="w3-white w3-right" style="width:40%">
                        下注:<input class="w3-input" type="text" onchange="oddsChange();">
                    </span>
                    <img src="image/1.jpg" class="w3-left w3-circle w3-margin-right" style="width:50px">
                    <span class="w3-large">隊伍-瑞助</span><br>
                    <span>賠率: 1賠<span class="odds">2</span></span>
                </li>
                <li class="w3-padding-16">
                    <span class="w3-white w3-right" style="width:40%">
                        下注:<input class="w3-input" type="text" onchange="oddsChange();">
                    </span>
                    <img src="image/2.jpg" class="w3-left w3-circle w3-margin-right" style="width:50px">
                    <span class="w3-large">隊伍-魔獸</span><br>
                    <span>賠率: 1賠<span class="odds">2</span></span>
                </li>  
                <li class="w3-padding-16">
                    <span class="w3-white w3-right" style="width:40%">
                        下注:<input class="w3-input" type="text" onchange="oddsChange();">
                    </span>
                    <img src="image/3.jpg" class="w3-left w3-circle w3-margin-right" style="width:50px">
                    <span class="w3-large">隊伍-小七</span><br>
                    <span>賠率: 1賠<span class="odds">2</span></span>
                </li> 
                <li class="w3-padding-16">
                    <span class="w3-white w3-right" style="width:40%">
                        下注:<input class="w3-input" type="text" onchange="oddsChange();">
                    </span>
                    <img src="image/4.jpg" class="w3-left w3-circle w3-margin-right" style="width:50px">
                    <span class="w3-large">隊伍-阿寶</span><br>
                    <span>賠率: 1賠<span class="odds">2</span></span>
                </li> 
                <li class="w3-padding-16">
                    <span class="w3-white w3-right" style="width:40%">
                        下注:<input class="w3-input" type="text" onchange="oddsChange();">
                    </span>
                    <img src="image/5.jpg" class="w3-left w3-circle w3-margin-right" style="width:50px">
                    <span class="w3-large">隊伍-大同</span><br>
                    <span>賠率: 1賠<span class="odds">2</span></span>
                </li> 
            </ul>
            <div class="w3-section">
                <button class="w3-button w3-block w3-teal" onclick="calculate();">計算</button>
            </div>
            <div class="w3-overlay">
                <div class="w3-panel w3-blue w3-round-xlarge w3-display-middle" style="width:80%"></div>
            </div>
    </body>
</html>